<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>JuiceHunter - ÏµúÏ†ÄÍ∞Ä Í∞ÄÍ≤©ÎπÑÍµê</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
        :root { --primary: #00c853; --dark: #1a1a1a; --bg: #f8f9fa; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); margin: 0; display: flex; }
        nav { width: 240px; background: white; height: 100vh; position: sticky; top: 0; padding: 40px 20px; border-right: 1px solid #eee; }
        .logo { font-size: 1.8rem; font-weight: 900; color: var(--primary); margin-bottom: 40px; }
        .cat-title { font-size: 0.8rem; color: #999; font-weight: 700; margin: 20px 0 10px 10px; }
        .cat-item { padding: 12px 15px; cursor: pointer; border-radius: 12px; font-weight: 600; color: #555; transition: 0.2s; }
        .cat-item:hover { background: #f1f3f5; color: var(--primary); }
        main { flex: 1; padding: 40px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 30px; }
        .card { background: white; border-radius: 24px; padding: 24px; text-align: center; border: 1px solid #eee; transition: 0.3s; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.08); }
        .card img { width: 100%; height: 180px; object-fit: contain; margin-bottom: 20px; }
        .card .name { font-size: 1.1rem; font-weight: 700; height: 44px; margin-bottom: 10px; }
        .card .price { font-size: 1.6rem; font-weight: 900; color: #ff4757; margin-bottom: 20px; }
        .btn { display: block; background: var(--dark); color: white; padding: 14px; border-radius: 16px; text-decoration: none; font-weight: 700; cursor: pointer; border: none; width: 100%; font-family: inherit; }
        /* Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); }
        .modal-content { background: white; margin: 10% auto; padding: 30px; border-radius: 30px; width: 360px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
        .p-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .p-site { font-weight: 700; color: #444; }
        .p-price { color: #ff4757; font-weight: 800; }
        .p-link { background: var(--primary); color: white; padding: 6px 12px; border-radius: 8px; text-decoration: none; font-size: 0.8rem; font-weight: 700; }
    </style>
</head>
<body>
    <nav>
        <div class="logo">JuiceHunter</div>
        <div class="cat-item" onclick="loadItems('all')">üè° Ï†ÑÏ≤¥Î≥¥Í∏∞</div>
        <div class="cat-title">Ïï°ÏÉÅ Î∂ÑÎ•ò</div>
        <div class="cat-item" onclick="loadItems('Í≥ºÏùºÏï°ÏÉÅ')">üçé Í≥ºÏùºÏï°ÏÉÅ</div>
        <div class="cat-item" onclick="loadItems('Ïó∞Ï¥àÏï°ÏÉÅ')">üö¨ Ïó∞Ï¥àÏï°ÏÉÅ</div>
        <div class="cat-item" onclick="loadItems('ÎîîÏ†ÄÌä∏Ïï°ÏÉÅ')">üç∞ ÎîîÏ†ÄÌä∏Ïï°ÏÉÅ</div>
    </nav>
    <main>
        <div id="main-grid" class="grid"></div>
    </main>

    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2 id="m-title" style="margin-top:0">Í∞ÄÍ≤©ÎπÑÍµê</h2>
            <div id="m-body"></div>
            <button onclick="closeM()" style="width:100%; margin-top:20px; padding:10px; border:none; background:#eee; border-radius:10px; font-weight:700; cursor:pointer;">Îã´Í∏∞</button>
        </div>
    </div>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyDWLSY2011hlBsBLTca2Px0ads5E75yqig",
            authDomain: "juicehunter.firebaseapp.com",
            projectId: "juicehunter",
            storageBucket: "juicehunter.firebasestorage.app",
            messagingSenderId: "1022388269792",
            appId: "1:1022388269792:web:7aed80372147d11dff1685"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function loadItems(cat) {
            let q = db.collection("liquids");
            if(cat !== 'all') q = q.where("category", "==", cat);
            q.onSnapshot(s => {
                const g = document.getElementById("main-grid");
                g.innerHTML = "";
                s.forEach(doc => {
                    const i = doc.data();
                    const pList = JSON.stringify(i.price_list);
                    g.innerHTML += `
                        <div class="card">
                            <img src="${i.image}" onerror="this.src='https://via.placeholder.com/200?text=No+Image'">
                            <div class="name">${i.name}</div>
                            <div class="price">ÏµúÏ†Ä ${i.min_price.toLocaleString()}Ïõê</div>
                            <button class="btn" onclick='showM("${i.name}", ${pList}, "${doc.id}")'>Í∞ÄÍ≤©ÎπÑÍµê</button>
                        </div>`;
                });
            });
        }

        function showM(name, list, id) {
            document.getElementById("m-title").innerText = name;
            const b = document.getElementById("m-body");
            b.innerHTML = "";
            list.forEach(p => {
                b.innerHTML += `
                    <div class="p-row">
                        <span class="p-site">${p.site}</span>
                        <span class="p-price">${p.price.toLocaleString()}Ïõê</span>
                        <a href="${p.url}" target="_blank" class="p-link" onclick="upView('${id}')">Ïù¥Îèô</a>
                    </div>`;
            });
            document.getElementById("priceModal").style.display = "block";
        }

        function closeM() { document.getElementById("priceModal").style.display = "none"; }
        function upView(id) { db.collection("liquids").doc(id).update({ views: firebase.firestore.FieldValue.increment(1) }); }
        
        loadItems('all');
    </script>
</body>
</html>